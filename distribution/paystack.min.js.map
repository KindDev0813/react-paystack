{"version":3,"sources":["../src/PayStack.js"],"names":[],"mappings":"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","file":"paystack.min.js","sourcesContent":["import React, { Fragment,useEffect,useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n\r\nfunction PayStack(props) {\r\n  const psState = {\r\n    ...props,\r\n    scriptLoaded:null,\r\n    class: props.class || props.className || \"\"\r\n  }\r\n  const [payStackState,setPayStackState] = useState(psState);\r\n\r\n  useEffect(() => {\r\n       loadscriptAndUpdateState()\r\n      if(payStackState.scriptLoaded){\r\n        payWithPaystack()\r\n      }\r\n  },[payStackState,loadscriptAndUpdateState,payWithPaystack])\r\n\r\n  const payWithPaystack = () => {\r\n    payStackState.scriptLoaded &&\r\n    payStackState.scriptLoaded.then(() => {\r\n        console.log('ref:', payStackState.reference)\r\n        let paystackOptions = {\r\n          key: payStackState.paystackkey,\r\n          email: payStackState.email,\r\n          amount: payStackState.amount,\r\n          ref: payStackState.reference,\r\n          metadata: payStackState.metadata || {},\r\n          callback: response => {\r\n            payStackState.callback(response);\r\n          },\r\n          onClose: () => {\r\n            payStackState.close();\r\n          },\r\n          currency: payStackState.currency,\r\n          plan: payStackState.plan || \"\",\r\n          quantity: payStackState.quantity || \"\",\r\n          subaccount: payStackState.subaccount || \"\",\r\n          transaction_charge: payStackState.transaction_charge || 0,\r\n          bearer: payStackState.bearer || \"\",\r\n        };\r\n        if (payStackState.embed) {\r\n          paystackOptions.container = \"paystackEmbedContainer\";\r\n        }\r\n        const handler = window.PaystackPop.setup(paystackOptions);\r\n        if (!payStackState.embed) {\r\n          handler.openIframe();\r\n        }\r\n      });\r\n  }\r\n\r\n  const loadScript = (callback) => {\r\n    const script = document.createElement(\"script\");\r\n    script.src = \"https://js.paystack.co/v1/inline.js\";\r\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n    if (script.readyState) {\r\n      // IE\r\n      script.onreadystatechange = () => {\r\n        if (\r\n          script.readyState === \"loaded\" ||\r\n          script.readyState === \"complete\"\r\n        ) {\r\n          script.onreadystatechange = null;\r\n          callback();\r\n        }\r\n      };\r\n    } else {\r\n      // Others\r\n      script.onload = () => {\r\n        callback();\r\n      };\r\n    }\r\n  }\r\n\r\n  const loadscriptAndUpdateState = () => {\r\n    setPayStackState(\r\n      {...payStackState,\r\n        scriptLoaded: new Promise(resolve => {\r\n          loadScript(() => {\r\n            resolve();\r\n          });\r\n        })\r\n      },\r\n      () => {\r\n        if (props.embed) {\r\n          payWithPaystack();\r\n        }\r\n      }\r\n    );\r\n  }\r\n    const CustomTag = `${props.tag}`;\r\n    return props.embed ? (\r\n      <div id=\"paystackEmbedContainer\" />\r\n    ) : (\r\n      <Fragment>\r\n        <CustomTag\r\n          className={payStackState.class}\r\n          onClick={payWithPaystack}\r\n          disabled={payStackState.disabled}\r\n        >\r\n          {payStackState.text}\r\n        </CustomTag>\r\n      </Fragment>\r\n    );\r\n}\r\n\r\nPayStack.propTypes = {\r\n  embed: PropTypes.bool,\r\n  text: PropTypes.string,\r\n  class: PropTypes.string,\r\n  metadata: PropTypes.object,\r\n  currency: PropTypes.string,\r\n  plan: PropTypes.string,\r\n  quantity: PropTypes.string,\r\n  subaccount: PropTypes.string,\r\n  transaction_charge: PropTypes.number,\r\n  bearer: PropTypes.string,\r\n  reference: PropTypes.string.isRequired,\r\n  email: PropTypes.string.isRequired,\r\n  amount: PropTypes.number.isRequired, //in kobo\r\n  paystackkey: PropTypes.string.isRequired,\r\n  callback: PropTypes.func.isRequired,\r\n  close: PropTypes.func.isRequired,\r\n  disabled: PropTypes.bool,\r\n  tag: PropTypes.oneOf(['button', 'a', 'input']),\r\n};\r\n\r\nPayStack.defaultProps = {\r\n  tag: 'button',\r\n  text: \"Make Payment\",\r\n  currency: \"NGN\",\r\n  disabled: false\r\n};\r\n\r\nexport default PayStack;\r\n"]}