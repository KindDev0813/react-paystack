{"version":3,"sources":["../src/PayStack.js"],"names":[],"mappings":"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","file":"paystack.min.js","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass PayStack extends Component {\n  constructor(props) {\n    super(props);\n    this.payWithPaystack = this.payWithPaystack.bind(this);\n    this.loadScript = this.loadScript.bind(this);\n    this.state = {\n      scriptLoaded: null,\n      text: this.props.text || \"Make Payment\",\n      class: this.props.class || this.props.className || \"\",\n      currency: this.props.currency || \"NGN\",\n      disabled: this.props.disabled || false\n    };\n  }\n\n  componentDidMount() {\n    this.setState(\n      {\n        scriptLoaded: new Promise(resolve => {\n          this.loadScript(() => {\n            resolve();\n          });\n        })\n      },\n      () => {\n        if (this.props.embed) {\n          this.payWithPaystack();\n        }\n      }\n    );\n  }\n\n  loadScript(callback) {\n    const script = document.createElement(\"script\");\n    script.src = \"https://js.paystack.co/v1/inline.js\";\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n    if (script.readyState) {\n      // IE\n      script.onreadystatechange = () => {\n        if (\n          script.readyState === \"loaded\" ||\n          script.readyState === \"complete\"\n        ) {\n          script.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      // Others\n      script.onload = () => {\n        callback();\n      };\n    }\n  }\n\n  payWithPaystack() {\n    this.state.scriptLoaded &&\n      this.state.scriptLoaded.then(() => {\n        let paystackOptions = {\n          key: this.props.paystackkey,\n          email: this.props.email,\n          amount: this.props.amount,\n          ref: this.props.reference,\n          metadata: this.props.metadata || {},\n          callback: response => {\n            this.props.callback(response);\n          },\n          onClose: () => {\n            this.props.close();\n          },\n          currency: this.state.currency,\n          plan: this.props.plan || \"\",\n          quantity: this.props.quantity || \"\",\n          subaccount: this.props.subaccount || \"\",\n          transaction_charge: this.props.transaction_charge || 0,\n          bearer: this.props.bearer || \"\",\n        };\n        if (this.props.embed) {\n          paystackOptions.container = \"paystackEmbedContainer\";\n        }\n        const handler = window.PaystackPop.setup(paystackOptions);\n        if (!this.props.embed) {\n          handler.openIframe();\n        }\n      });\n  }\n\n  render() {\n    const CustomTag = `${this.props.tag}`;\n\n    return this.props.embed ? (\n      <div id=\"paystackEmbedContainer\" />\n    ) : (\n      <Fragment>\n        <CustomTag\n          className={this.state.class}\n          onClick={this.payWithPaystack}\n          disabled={this.state.disabled}\n        >\n          {this.state.text}\n        </CustomTag>\n      </Fragment>\n    );\n  }\n}\n\nPayStack.propTypes = {\n  embed: PropTypes.bool,\n  text: PropTypes.string,\n  class: PropTypes.string,\n  metadata: PropTypes.object,\n  currency: PropTypes.string,\n  plan: PropTypes.string,\n  quantity: PropTypes.string,\n  subaccount: PropTypes.string,\n  transaction_charge: PropTypes.number,\n  bearer: PropTypes.string,\n  reference: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  amount: PropTypes.number.isRequired, //in kobo\n  paystackkey: PropTypes.string.isRequired,\n  callback: PropTypes.func.isRequired,\n  close: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  tag: PropTypes.oneOf(['button', 'a', 'input']),\n};\n\nPayStack.defaultProps = {\n  tag: 'button',\n};\n\nexport default PayStack;\n"]}